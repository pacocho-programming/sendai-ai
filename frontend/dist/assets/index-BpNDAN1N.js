(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const mt=()=>{};var Te={};const je=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},gt=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=t[n++];e[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=t[n++],o=t[n++],c=t[n++],a=((s&7)<<18|(i&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const i=t[n++],o=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|o&63)}}return e.join("")},ze={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const i=t[s],o=s+1<t.length,c=o?t[s+1]:0,a=s+2<t.length,u=a?t[s+2]:0,d=i>>2,g=(i&3)<<4|c>>4;let l=(c&15)<<2|u>>6,f=u&63;a||(f=64,o||(l=64)),r.push(n[d],n[g],n[l],n[f])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(je(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):gt(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const i=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const g=s<t.length?n[t.charAt(s)]:64;if(++s,i==null||c==null||u==null||g==null)throw new _t;const l=i<<2|c>>4;if(r.push(l),u!==64){const f=c<<4&240|u>>2;if(r.push(f),g!==64){const E=u<<6&192|g;r.push(E)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class _t extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bt=function(t){const e=je(t);return ze.encodeByteArray(e,!0)},Y=function(t){return bt(t).replace(/\./g,"")},yt=function(t){try{return ze.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function wt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}const Et=()=>wt().__FIREBASE_DEFAULTS__,It=()=>{if(typeof process>"u"||typeof Te>"u")return;const t=Te.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},Ct=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&yt(t[1]);return e&&JSON.parse(e)},We=()=>{try{return mt()||Et()||It()||Ct()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},At=t=>We()?.emulatorHosts?.[t],Dt=t=>{const e=At(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},Xe=()=>We()?.config;class Tt{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}function we(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Rt(t){return(await fetch(t,{credentials:"include"})).ok}function St(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",s=t.iat||0,i=t.sub||t.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}},...t};return[Y(JSON.stringify(n)),Y(JSON.stringify(o)),""].join(".")}const z={};function vt(){const t={prod:[],emulator:[]};for(const e of Object.keys(z))z[e]?t.emulator.push(e):t.prod.push(e);return t}function Bt(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Re=!1;function Ot(t,e){if(typeof window>"u"||typeof document>"u"||!we(window.location.host)||z[t]===e||z[t]||Re)return;z[t]=e;function n(l){return`__firebase__banner__${l}`}const r="__firebase__banner",i=vt().prod.length>0;function o(){const l=document.getElementById(r);l&&l.remove()}function c(l){l.style.display="flex",l.style.background="#7faaf0",l.style.position="fixed",l.style.bottom="5px",l.style.left="5px",l.style.padding=".5em",l.style.borderRadius="5px",l.style.alignItems="center"}function a(l,f){l.setAttribute("width","24"),l.setAttribute("id",f),l.setAttribute("height","24"),l.setAttribute("viewBox","0 0 24 24"),l.setAttribute("fill","none"),l.style.marginLeft="-6px"}function u(){const l=document.createElement("span");return l.style.cursor="pointer",l.style.marginLeft="16px",l.style.fontSize="24px",l.innerHTML=" &times;",l.onclick=()=>{Re=!0,o()},l}function d(l,f){l.setAttribute("id",f),l.innerText="Learn more",l.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",l.setAttribute("target","__blank"),l.style.paddingLeft="5px",l.style.textDecoration="underline"}function g(){const l=Bt(r),f=n("text"),E=document.getElementById(f)||document.createElement("span"),S=n("learnmore"),_=document.getElementById(S)||document.createElement("a"),k=n("preprendIcon"),T=document.getElementById(k)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(l.created){const C=l.element;c(C),d(_,S);const w=u();a(T,k),C.append(T,E,_,w),document.body.appendChild(C)}i?(E.innerText="Preview backend disconnected.",T.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(T.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",f)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",g):g()}function xt(){try{return typeof indexedDB=="object"}catch{return!1}}function kt(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{e(s.error?.message||"")}}catch(n){e(n)}})}const Nt="FirebaseError";class V extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Nt,Object.setPrototypeOf(this,V.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ge.prototype.create)}}class Ge{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,i=this.errors[e],o=i?Pt(i,r):"Error",c=`${this.serviceName}: ${o} (${s}).`;return new V(s,c,r)}}function Pt(t,e){return t.replace(Lt,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Lt=/\{\$([^}]+)}/g;function fe(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const i=t[s],o=e[s];if(Se(i)&&Se(o)){if(!fe(i,o))return!1}else if(i!==o)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Se(t){return t!==null&&typeof t=="object"}function Ee(t){return t&&t._delegate?t._delegate:t}class X{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const M="[DEFAULT]";class Ut{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Tt;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e?.identifier),r=e?.optional??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if($t(e))try{this.getOrInitializeService({instanceIdentifier:M})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(e=M){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=M){return this.instances.has(e)}getOptions(e=M){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(i);r===c&&o.resolve(s)}return s}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),s=this.onInitCallbacks.get(r)??new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Mt(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=M){return this.component?this.component.multipleInstances?e:M:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Mt(t){return t===M?void 0:t}function $t(t){return t.instantiationMode==="EAGER"}class Ft{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Ut(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}var h;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(h||(h={}));const Ht={debug:h.DEBUG,verbose:h.VERBOSE,info:h.INFO,warn:h.WARN,error:h.ERROR,silent:h.SILENT},Vt=h.INFO,jt={[h.DEBUG]:"log",[h.VERBOSE]:"log",[h.INFO]:"info",[h.WARN]:"warn",[h.ERROR]:"error"},zt=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=jt[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Wt{constructor(e){this.name=e,this._logLevel=Vt,this._logHandler=zt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in h))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ht[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,h.DEBUG,...e),this._logHandler(this,h.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,h.VERBOSE,...e),this._logHandler(this,h.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,h.INFO,...e),this._logHandler(this,h.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,h.WARN,...e),this._logHandler(this,h.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,h.ERROR,...e),this._logHandler(this,h.ERROR,...e)}}const Xt=(t,e)=>e.some(n=>t instanceof n);let ve,Be;function Gt(){return ve||(ve=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Kt(){return Be||(Be=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Ke=new WeakMap,pe=new WeakMap,qe=new WeakMap,re=new WeakMap,Ie=new WeakMap;function qt(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",i),t.removeEventListener("error",o)},i=()=>{n(L(t.result)),s()},o=()=>{r(t.error),s()};t.addEventListener("success",i),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Ke.set(n,t)}).catch(()=>{}),Ie.set(e,t),e}function Zt(t){if(pe.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",i),t.removeEventListener("error",o),t.removeEventListener("abort",o)},i=()=>{n(),s()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",i),t.addEventListener("error",o),t.addEventListener("abort",o)});pe.set(t,e)}let me={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return pe.get(t);if(e==="objectStoreNames")return t.objectStoreNames||qe.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return L(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Yt(t){me=t(me)}function Jt(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(se(this),e,...n);return qe.set(r,e.sort?e.sort():[e]),L(r)}:Kt().includes(t)?function(...e){return t.apply(se(this),e),L(Ke.get(this))}:function(...e){return L(t.apply(se(this),e))}}function Qt(t){return typeof t=="function"?Jt(t):(t instanceof IDBTransaction&&Zt(t),Xt(t,Gt())?new Proxy(t,me):t)}function L(t){if(t instanceof IDBRequest)return qt(t);if(re.has(t))return re.get(t);const e=Qt(t);return e!==t&&(re.set(t,e),Ie.set(e,t)),e}const se=t=>Ie.get(t);function en(t,e,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const o=indexedDB.open(t,e),c=L(o);return r&&o.addEventListener("upgradeneeded",a=>{r(L(o.result),a.oldVersion,a.newVersion,L(o.transaction),a)}),n&&o.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),c.then(a=>{i&&a.addEventListener("close",()=>i()),s&&a.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}const tn=["get","getKey","getAll","getAllKeys","count"],nn=["put","add","delete","clear"],ie=new Map;function Oe(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(ie.get(e))return ie.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=nn.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||tn.includes(n)))return;const i=async function(o,...c){const a=this.transaction(o,s?"readwrite":"readonly");let u=a.store;return r&&(u=u.index(c.shift())),(await Promise.all([u[n](...c),s&&a.done]))[0]};return ie.set(e,i),i}Yt(t=>({...t,get:(e,n,r)=>Oe(e,n)||t.get(e,n,r),has:(e,n)=>!!Oe(e,n)||t.has(e,n)}));class rn{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(sn(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function sn(t){return t.getComponent()?.type==="VERSION"}const ge="@firebase/app",xe="0.14.8";const N=new Wt("@firebase/app"),on="@firebase/app-compat",an="@firebase/analytics-compat",cn="@firebase/analytics",ln="@firebase/app-check-compat",un="@firebase/app-check",hn="@firebase/auth",dn="@firebase/auth-compat",fn="@firebase/database",pn="@firebase/data-connect",mn="@firebase/database-compat",gn="@firebase/functions",_n="@firebase/functions-compat",bn="@firebase/installations",yn="@firebase/installations-compat",wn="@firebase/messaging",En="@firebase/messaging-compat",In="@firebase/performance",Cn="@firebase/performance-compat",An="@firebase/remote-config",Dn="@firebase/remote-config-compat",Tn="@firebase/storage",Rn="@firebase/storage-compat",Sn="@firebase/firestore",vn="@firebase/ai",Bn="@firebase/firestore-compat",On="firebase",xn="12.9.0";const _e="[DEFAULT]",kn={[ge]:"fire-core",[on]:"fire-core-compat",[cn]:"fire-analytics",[an]:"fire-analytics-compat",[un]:"fire-app-check",[ln]:"fire-app-check-compat",[hn]:"fire-auth",[dn]:"fire-auth-compat",[fn]:"fire-rtdb",[pn]:"fire-data-connect",[mn]:"fire-rtdb-compat",[gn]:"fire-fn",[_n]:"fire-fn-compat",[bn]:"fire-iid",[yn]:"fire-iid-compat",[wn]:"fire-fcm",[En]:"fire-fcm-compat",[In]:"fire-perf",[Cn]:"fire-perf-compat",[An]:"fire-rc",[Dn]:"fire-rc-compat",[Tn]:"fire-gcs",[Rn]:"fire-gcs-compat",[Sn]:"fire-fst",[Bn]:"fire-fst-compat",[vn]:"fire-vertex","fire-js":"fire-js",[On]:"fire-js-all"};const J=new Map,Nn=new Map,be=new Map;function ke(t,e){try{t.container.addComponent(e)}catch(n){N.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Q(t){const e=t.name;if(be.has(e))return N.debug(`There were multiple attempts to register component ${e}.`),!1;be.set(e,t);for(const n of J.values())ke(n,t);for(const n of Nn.values())ke(n,t);return!0}function Pn(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function Ln(t){return t==null?!1:t.settings!==void 0}const Un={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},U=new Ge("app","Firebase",Un);class Mn{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new X("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw U.create("app-deleted",{appName:this._name})}}const $n=xn;function Ze(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:_e,automaticDataCollectionEnabled:!0,...e},s=r.name;if(typeof s!="string"||!s)throw U.create("bad-app-name",{appName:String(s)});if(n||(n=Xe()),!n)throw U.create("no-options");const i=J.get(s);if(i){if(fe(n,i.options)&&fe(r,i.config))return i;throw U.create("duplicate-app",{appName:s})}const o=new Ft(s);for(const a of be.values())o.addComponent(a);const c=new Mn(n,r,o);return J.set(s,c),c}function Fn(t=_e){const e=J.get(t);if(!e&&t===_e&&Xe())return Ze();if(!e)throw U.create("no-app",{appName:t});return e}function H(t,e,n){let r=kn[t]??t;n&&(r+=`-${n}`);const s=r.match(/\s|\//),i=e.match(/\s|\//);if(s||i){const o=[`Unable to register library "${r}" with version "${e}":`];s&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&i&&o.push("and"),i&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),N.warn(o.join(" "));return}Q(new X(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}const Hn="firebase-heartbeat-database",Vn=1,G="firebase-heartbeat-store";let oe=null;function Ye(){return oe||(oe=en(Hn,Vn,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(G)}catch(n){console.warn(n)}}}}).catch(t=>{throw U.create("idb-open",{originalErrorMessage:t.message})})),oe}async function jn(t){try{const n=(await Ye()).transaction(G),r=await n.objectStore(G).get(Je(t));return await n.done,r}catch(e){if(e instanceof V)N.warn(e.message);else{const n=U.create("idb-get",{originalErrorMessage:e?.message});N.warn(n.message)}}}async function Ne(t,e){try{const r=(await Ye()).transaction(G,"readwrite");await r.objectStore(G).put(e,Je(t)),await r.done}catch(n){if(n instanceof V)N.warn(n.message);else{const r=U.create("idb-set",{originalErrorMessage:n?.message});N.warn(r.message)}}}function Je(t){return`${t.name}!${t.options.appId}`}const zn=1024,Wn=30;class Xn{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Kn(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=Pe();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(s=>s.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>Wn){const s=qn(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(s,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){N.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Pe(),{heartbeatsToSend:n,unsentEntries:r}=Gn(this._heartbeatsCache.heartbeats),s=Y(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(e){return N.warn(e),""}}}function Pe(){return new Date().toISOString().substring(0,10)}function Gn(t,e=zn){const n=[];let r=t.slice();for(const s of t){const i=n.find(o=>o.agent===s.agent);if(i){if(i.dates.push(s.date),Le(n)>e){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),Le(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Kn{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xt()?kt().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await jn(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Ne(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return Ne(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Le(t){return Y(JSON.stringify({version:2,heartbeats:t})).length}function qn(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}function Zn(t){Q(new X("platform-logger",e=>new rn(e),"PRIVATE")),Q(new X("heartbeat",e=>new Xn(e),"PRIVATE")),H(ge,xe,t),H(ge,xe,"esm2020"),H("fire-js","")}Zn("");var Yn="firebase",Jn="12.9.0";H(Yn,Jn,"app");const Qe="firebasestorage.googleapis.com",et="storageBucket",Qn=120*1e3,er=600*1e3;class m extends V{constructor(e,n,r=0){super(ae(e),`Firebase Storage: ${n} (${ae(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,m.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ae(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var p;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(p||(p={}));function ae(t){return"storage/"+t}function Ce(){const t="An unknown error occurred, please check the error payload for server response.";return new m(p.UNKNOWN,t)}function tr(t){return new m(p.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function nr(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new m(p.UNAUTHENTICATED,t)}function rr(){return new m(p.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function sr(t){return new m(p.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function ir(){return new m(p.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function or(){return new m(p.CANCELED,"User canceled the upload/download.")}function ar(t){return new m(p.INVALID_URL,"Invalid URL '"+t+"'.")}function cr(t){return new m(p.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function lr(){return new m(p.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+et+"' property when initializing the app?")}function ur(){return new m(p.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function hr(t){return new m(p.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function ye(t){return new m(p.INVALID_ARGUMENT,t)}function tt(){return new m(p.APP_DELETED,"The Firebase app was deleted.")}function dr(t){return new m(p.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function W(t,e){return new m(p.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function j(t){throw new m(p.INTERNAL_ERROR,"Internal error: "+t)}class D{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=D.makeFromUrl(e,n)}catch{return new D(e,"")}if(r.path==="")return r;throw cr(e)}static makeFromUrl(e,n){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",c=new RegExp("^gs://"+s+o,"i"),a={bucket:1,path:3};function u(w){w.path_=decodeURIComponent(w.path)}const d="v[A-Za-z0-9_]+",g=n.replace(/[.]/g,"\\."),l="(/([^?#]*).*)?$",f=new RegExp(`^https?://${g}/${d}/b/${s}/o${l}`,"i"),E={bucket:1,path:3},S=n===Qe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,_="([^?#]*)",k=new RegExp(`^https?://${S}/${s}/${_}`,"i"),C=[{regex:c,indices:a,postModify:i},{regex:f,indices:E,postModify:u},{regex:k,indices:{bucket:1,path:2},postModify:u}];for(let w=0;w<C.length;w++){const K=C[w],te=K.regex.exec(e);if(te){const pt=te[K.indices.bucket];let ne=te[K.indices.path];ne||(ne=""),r=new D(pt,ne),K.postModify(r);break}}if(r==null)throw ar(e);return r}}class fr{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function pr(t,e,n){let r=1,s=null,i=null,o=!1,c=0;function a(){return c===2}let u=!1;function d(..._){u||(u=!0,e.apply(null,_))}function g(_){s=setTimeout(()=>{s=null,t(f,a())},_)}function l(){i&&clearTimeout(i)}function f(_,...k){if(u){l();return}if(_){l(),d.call(null,_,...k);return}if(a()||o){l(),d.call(null,_,...k);return}r<64&&(r*=2);let C;c===1?(c=2,C=0):C=(r+Math.random())*1e3,g(C)}let E=!1;function S(_){E||(E=!0,l(),!u&&(s!==null?(_||(c=2),clearTimeout(s),g(0)):_||(c=1)))}return g(0),i=setTimeout(()=>{o=!0,S(!0)},n),S}function mr(t){t(!1)}function gr(t){return t!==void 0}function _r(t){return typeof t=="object"&&!Array.isArray(t)}function nt(t){return typeof t=="string"||t instanceof String}function Ue(t){return Ae()&&t instanceof Blob}function Ae(){return typeof Blob<"u"}function Me(t,e,n,r){if(r<e)throw ye(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw ye(`Invalid value for '${t}'. Expected ${n} or less.`)}function br(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function yr(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const s=e(r)+"="+e(t[r]);n=n+s+"&"}return n=n.slice(0,-1),n}var $;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})($||($={}));function wr(t,e){const n=t>=500&&t<600,s=[408,429].indexOf(t)!==-1,i=e.indexOf(t)!==-1;return n||s||i}class Er{constructor(e,n,r,s,i,o,c,a,u,d,g,l=!0,f=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=o,this.callback_=c,this.errorCallback_=a,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=g,this.retry=l,this.isUsingEmulator=f,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,S)=>{this.resolve_=E,this.reject_=S,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new q(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const o=c=>{const a=c.loaded,u=c.lengthComputable?c.total:-1;this.progressCallback_!==null&&this.progressCallback_(a,u)};this.progressCallback_!==null&&i.addUploadProgressListener(o),i.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(o),this.pendingConnection_=null;const c=i.getErrorCode()===$.NO_ERROR,a=i.getStatus();if(!c||wr(a,this.additionalRetryCodes_)&&this.retry){const d=i.getErrorCode()===$.ABORT;r(!1,new q(!1,null,d));return}const u=this.successCodes_.indexOf(a)!==-1;r(!0,new q(u,i))})},n=(r,s)=>{const i=this.resolve_,o=this.reject_,c=s.connection;if(s.wasSuccessCode)try{const a=this.callback_(c,c.getResponse());gr(a)?i(a):i()}catch(a){o(a)}else if(c!==null){const a=Ce();a.serverResponse=c.getErrorText(),this.errorCallback_?o(this.errorCallback_(c,a)):o(a)}else if(s.canceled){const a=this.appDelete_?tt():or();o(a)}else{const a=ir();o(a)}};this.canceled_?n(!1,new q(!1,null,!0)):this.backoffId_=pr(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&mr(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class q{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Ir(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Cr(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Ar(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Dr(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Tr(t,e,n,r,s,i,o=!0,c=!1){const a=yr(t.urlParams),u=t.url+a,d=Object.assign({},t.headers);return Ar(d,e),Ir(d,n),Cr(d,i),Dr(d,r),new Er(u,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,s,o,c)}function Rr(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Sr(...t){const e=Rr();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Ae())return new Blob(t);throw new m(p.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function vr(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}function Br(t){if(typeof atob>"u")throw hr("base-64");return atob(t)}const x={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ce{constructor(e,n){this.data=e,this.contentType=n||null}}function Or(t,e){switch(t){case x.RAW:return new ce(rt(e));case x.BASE64:case x.BASE64URL:return new ce(st(t,e));case x.DATA_URL:return new ce(kr(e),Nr(e))}throw Ce()}function rt(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const i=r,o=t.charCodeAt(++n);r=65536|(i&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function xr(t){let e;try{e=decodeURIComponent(t)}catch{throw W(x.DATA_URL,"Malformed data URL.")}return rt(e)}function st(t,e){switch(t){case x.BASE64:{const s=e.indexOf("-")!==-1,i=e.indexOf("_")!==-1;if(s||i)throw W(t,"Invalid character '"+(s?"-":"_")+"' found: is it base64url encoded?");break}case x.BASE64URL:{const s=e.indexOf("+")!==-1,i=e.indexOf("/")!==-1;if(s||i)throw W(t,"Invalid character '"+(s?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Br(e)}catch(s){throw s.message.includes("polyfill")?s:W(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}class it{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw W(x.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Pr(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function kr(t){const e=new it(t);return e.base64?st(x.BASE64,e.rest):xr(e.rest)}function Nr(t){return new it(t).contentType}function Pr(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}class P{constructor(e,n){let r=0,s="";Ue(e)?(this.data_=e,r=e.size,s=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=s}size(){return this.size_}type(){return this.type_}slice(e,n){if(Ue(this.data_)){const r=this.data_,s=vr(r,e,n);return s===null?null:new P(s)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new P(r,!0)}}static getBlob(...e){if(Ae()){const n=e.map(r=>r instanceof P?r.data_:r);return new P(Sr.apply(null,n))}else{const n=e.map(o=>nt(o)?Or(x.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const s=new Uint8Array(r);let i=0;return n.forEach(o=>{for(let c=0;c<o.length;c++)s[i++]=o[c]}),new P(s,!0)}}uploadData(){return this.data_}}function Lr(t){let e;try{e=JSON.parse(t)}catch{return null}return _r(e)?e:null}function Ur(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Mr(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function ot(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}function $r(t,e){return e}class I{constructor(e,n,r,s){this.server=e,this.local=n||e,this.writable=!!r,this.xform=s||$r}}let Z=null;function Fr(t){return!nt(t)||t.length<2?t:ot(t)}function Hr(){if(Z)return Z;const t=[];t.push(new I("bucket")),t.push(new I("generation")),t.push(new I("metageneration")),t.push(new I("name","fullPath",!0));function e(i,o){return Fr(o)}const n=new I("name");n.xform=e,t.push(n);function r(i,o){return o!==void 0?Number(o):o}const s=new I("size");return s.xform=r,t.push(s),t.push(new I("timeCreated")),t.push(new I("updated")),t.push(new I("md5Hash",null,!0)),t.push(new I("cacheControl",null,!0)),t.push(new I("contentDisposition",null,!0)),t.push(new I("contentEncoding",null,!0)),t.push(new I("contentLanguage",null,!0)),t.push(new I("contentType",null,!0)),t.push(new I("metadata","customMetadata",!0)),Z=t,Z}function Vr(t,e){function n(){const r=t.bucket,s=t.fullPath,i=new D(r,s);return e._makeStorageReference(i)}Object.defineProperty(t,"ref",{get:n})}function jr(t,e,n){const r={};r.type="file";const s=n.length;for(let i=0;i<s;i++){const o=n[i];r[o.local]=o.xform(r,e[o.server])}return Vr(r,t),r}function zr(t,e,n){const r=Lr(e);return r===null?null:jr(t,r,n)}function Wr(t,e){const n={},r=e.length;for(let s=0;s<r;s++){const i=e[s];i.writable&&(n[i.server]=t[i.local])}return JSON.stringify(n)}class Xr{constructor(e,n,r,s){this.url=e,this.method=n,this.handler=r,this.timeout=s,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Gr(t){if(!t)throw Ce()}function Kr(t,e){function n(r,s){const i=zr(t,s,e);return Gr(i!==null),i}return n}function qr(t){function e(n,r){let s;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?s=rr():s=nr():n.getStatus()===402?s=tr(t.bucket):n.getStatus()===403?s=sr(t.path):s=r,s.status=n.getStatus(),s.serverResponse=r.serverResponse,s}return e}function Zr(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function Yr(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Zr(null,e)),r}function Jr(t,e,n,r,s){const i=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function c(){let C="";for(let w=0;w<2;w++)C=C+Math.random().toString().slice(2);return C}const a=c();o["Content-Type"]="multipart/related; boundary="+a;const u=Yr(e,r,s),d=Wr(u,n),g="--"+a+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+a+`\r
Content-Type: `+u.contentType+`\r
\r
`,l=`\r
--`+a+"--",f=P.getBlob(g,r,l);if(f===null)throw ur();const E={name:u.fullPath},S=br(i,t.host,t._protocol),_="POST",k=t.maxUploadRetryTime,T=new Xr(S,_,Kr(t,n),k);return T.urlParams=E,T.headers=o,T.body=f.uploadData(),T.errorHandler=qr(e),T}class Qr{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=$.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=$.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=$.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,s,i){if(this.sent_)throw j("cannot .send() more than once");if(we(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),i!==void 0)for(const o in i)i.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,i[o].toString());return s!==void 0?this.xhr_.send(s):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw j("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw j("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw j("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw j("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class es extends Qr{initXhr(){this.xhr_.responseType="text"}}function ts(){return new es}class F{constructor(e,n){this._service=e,n instanceof D?this._location=n:this._location=D.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new F(e,n)}get root(){const e=new D(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return ot(this._location.path)}get storage(){return this._service}get parent(){const e=Ur(this._location.path);if(e===null)return null;const n=new D(this._location.bucket,e);return new F(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw dr(e)}}function ns(t,e,n){t._throwIfRoot("uploadBytes");const r=Jr(t.storage,t._location,Hr(),new P(e,!0),n);return t.storage.makeRequestWithTokens(r,ts).then(s=>({metadata:s,ref:t}))}function rs(t,e){const n=Mr(t._location.path,e),r=new D(t._location.bucket,n);return new F(t.storage,r)}function ss(t){return/^[A-Za-z]+:\/\//.test(t)}function is(t,e){return new F(t,e)}function at(t,e){if(t instanceof De){const n=t;if(n._bucket==null)throw lr();const r=new F(n,n._bucket);return e!=null?at(r,e):r}else return e!==void 0?rs(t,e):t}function os(t,e){if(e&&ss(e)){if(t instanceof De)return is(t,e);throw ye("To use ref(service, url), the first argument must be a Storage instance.")}else return at(t,e)}function $e(t,e){const n=e?.[et];return n==null?null:D.makeFromBucketSpec(n,t)}function as(t,e,n,r={}){t.host=`${e}:${n}`;const s=we(e);s&&(Rt(`https://${t.host}/b`),Ot("Storage",!0)),t._isUsingEmulator=!0,t._protocol=s?"https":"http";const{mockUserToken:i}=r;i&&(t._overrideAuthToken=typeof i=="string"?i:St(i,t.app.options.projectId))}class De{constructor(e,n,r,s,i,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._isUsingEmulator=o,this._bucket=null,this._host=Qe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Qn,this._maxUploadRetryTime=er,this._requests=new Set,s!=null?this._bucket=D.makeFromBucketSpec(s,this._host):this._bucket=$e(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=D.makeFromBucketSpec(this._url,e):this._bucket=$e(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Me("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Me("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(Ln(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new F(this,e)}_makeRequest(e,n,r,s,i=!0){if(this._deleted)return new fr(tt());{const o=Tr(e,this._appId,r,s,n,this._firebaseVersion,i,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,s).getPromise()}}const Fe="@firebase/storage",He="0.14.0";const ct="storage";function lt(t,e,n){return t=Ee(t),ns(t,e,n)}function ut(t,e){return t=Ee(t),os(t,e)}function cs(t=Fn(),e){t=Ee(t);const r=Pn(t,ct).getImmediate({identifier:e}),s=Dt("storage");return s&&ls(r,...s),r}function ls(t,e,n,r={}){as(t,e,n,r)}function us(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new De(n,r,s,e,$n)}function hs(){Q(new X(ct,us,"PUBLIC").setMultipleInstances(!0)),H(Fe,He,""),H(Fe,He,"esm2020")}hs();const ds={apiKey:"AIzaSyBZ57-QXYWNt99L5c7iS-l0qZy3beD9su8",authDomain:"sendaiai.firebaseapp.com",projectId:"sendaiai",storageBucket:"sendaiai.firebasestorage.app",messagingSenderId:"964411971482",appId:"1:964411971482:web:b4986c771af20e30518c23"},fs=Ze(ds),ht=cs(fs);async function ps(t,e){const n=ut(ht,`images/train/img_${e}.jpg`);await lt(n,t)}async function ms(t,e){const n=new Blob([t],{type:"text/plain"}),r=ut(ht,`labels/train/img_${e}.txt`);await lt(r,n)}const R=document.getElementById("draw_result"),A=R.getContext("2d"),gs=600,B=8,dt={"-1":"none",0:"milk",1:"yogurt",2:"butter",3:"tofu"};let O=new Image,y=1,b=null,le=!1,ue=!1,he=0,de=0,v=[],Ve=null;function ft(){const t=document.getElementById("imageInput");if(!t.files||t.files.length===0)return alert(""),null;const e=t.files[0];return console.log(":",e),e}async function _s(t){const e=new FormData;e.append("image",t);const n=await fetch("http://localhost:5001/predict",{method:"POST",body:e});if(!n.ok)throw new Error("Flask");return Ve=await n.json(),Ve}async function bs(t,e,n){await ps(t,n),await ms(e,n),console.log("")}async function ys(t){const e=ft(),n=new FileReader;n.onload=async()=>{O.onload=async()=>{y=Math.min(1,gs/O.width),R.width=O.width*y,R.height=O.height*y;try{const r=await _s(e);v=r.detections.map(s=>({class:s.class,confidence:s.confidence,x1:s.box[0],y1:s.box[1],x2:s.box[2],y2:s.box[3]})),ee(v),console.log("YOLO:",r)}catch(r){alert(r.message)}},O.src=n.result},n.readAsDataURL(e)}function ee(t){A.clearRect(0,0,R.width,R.height),A.drawImage(O,0,0,R.width,R.height),t.forEach(e=>{const{x1:n,y1:r,x2:s,y2:i}=e,o=n*y,c=r*y,a=s*y,u=i*y;A.strokeStyle=e===b?"red":"blue",A.lineWidth=2,A.strokeRect(o,c,a-o,u-c),A.fillStyle="red",A.font="16px Arial",A.fillText(`class:${e.class} ${(e.confidence*100).toFixed(1)}%`,o,c-5),A.fillStyle="white",A.strokeStyle="black",A.lineWidth=1,A.fillRect(a-B/2,u-B/2,B,B),A.strokeRect(a-B/2,u-B/2,B,B)})}function ws(t,e,n){return t>=n.x1*y&&t<=n.x2*y&&e>=n.y1*y&&e<=n.y2*y}function Es(t,e,n){const r=n.x2*y,s=n.y2*y;return Math.abs(t-r)<B&&Math.abs(e-s)<B}function Is(){R.addEventListener("mousedown",t=>{const e=R.getBoundingClientRect(),n=t.clientX-e.left,r=t.clientY-e.top;b=null;for(let s of v){if(Es(n,r,s)){b=s,ue=!0;return}if(ws(n,r,s)){b=s,le=!0,he=n,de=r;let i=b.class;document.getElementById("food_name").value=dt[i];return}}}),R.addEventListener("mousemove",t=>{if(!b)return;const e=R.getBoundingClientRect(),n=t.clientX-e.left,r=t.clientY-e.top;if(le){const s=(n-he)/y,i=(r-de)/y;b.x1+=s,b.y1+=i,b.x2+=s,b.y2+=i,he=n,de=r,ee(v)}ue&&(b.x2=n/y,b.y2=r/y,ee(v))}),R.addEventListener("mouseup",()=>{le=!1,ue=!1})}function Cs(){document.getElementById("labelSelect").addEventListener("change",e=>{if(!b)return;const n=parseInt(e.target.value);if(b.class=n,b.class===-1){const r=v.indexOf(b);r!==-1&&v.splice(r,1),b=null,document.getElementById("food_name").value=""}else document.getElementById("food_name").value=dt[n];ee(v)})}function As(){return!v||v.length===0?(alert(""),""):v.filter(t=>t.class!==-1).map(t=>{const e=(t.x1+t.x2)/2/O.width,n=(t.y1+t.y2)/2/O.height,r=(t.x2-t.x1)/O.width,s=(t.y2-t.y1)/O.height;return`${t.class} ${e.toFixed(6)} ${n.toFixed(6)} ${r.toFixed(6)} ${s.toFixed(6)}`}).join(`
`)}function Ds(){return`${Date.now()}_${Math.random().toString(36).slice(2,8)}`}function Ts(){const t=ft();if(!t)return;const e=As(),n=Ds();bs(t,e,n)}Is();Cs();document.getElementById("scanBtn").addEventListener("click",ys);document.getElementById("send").addEventListener("click",Ts);
